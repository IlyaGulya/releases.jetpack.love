libraryId: compose-runtime
groupId: androidx.compose
version: 1.10.0-beta02
releaseDate: 2025-11-05
#language=html
changelogHtml: |
  <h3 id="1.10.0-beta02" data-text="Version 1.10.0-beta02" tabindex="-1">Version 1.10.0-beta02</h3>
  <p>November 05, 2025</p>
  <p>
    <code translate="no" dir="ltr">androidx.compose.runtime:runtime-*:1.10.0-beta02</code>
    is released. Version 1.10.0-beta02 contains
    <a href="https://android.googlesource.com/platform/frameworks/support/+log/784e4a2de372f09d49c65fbc1ca64681a25a5f06..d1c84233fc2372352b838d165d256581ff37ada9/compose/runtime">these commits</a>
    .
  </p>
  <p><strong>API Changes</strong></p>
  <ul>
    <li>
      <p>
        We've made several API-incompatible changes to simplify the installation and management of
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        s. Existing calls to
        <code translate="no" dir="ltr">retain</code>
        and
        <code translate="no" dir="ltr">RetainedEffect</code>
        are unaffected, but any custom
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        s will require a migration to be compatible with this release. (
        <a href="https://android-review.googlesource.com/#/q/If3c2f6af591234cc185e38263fa5671c72ff5813">If3c2f</a>
        ,
        <a href="https://issuetracker.google.com/issues/451921682">b/451921682</a>
        ,
        <a href="https://issuetracker.google.com/issues/450539803">b/450539803</a>
        )
      </p>
    </li>
    <li>
      <p>
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        no longer exposes low-level APIs to start/stop retention. Retention state now automatically follows the content.
        <code translate="no" dir="ltr">LocalRetainedValuesStoreProvider</code>
        is now offered to install
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        .
        <code translate="no" dir="ltr">LocalRetainedValuesStore</code>
        should not be provided directly. See the updated documentation and samples for more information on these changes.
      </p>
    </li>
    <li>
      <p>
        <code translate="no" dir="ltr">RetainedValuesStoreProvider</code>
        is renamed to
        <code translate="no" dir="ltr">RetainedValuesStoreRegistry</code>
        . This class now only exposes APIs to install and manage the
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        s in composition.
      </p>
    </li>
    <li>
      <p>
        <code translate="no" dir="ltr">ControlledRetainedValuesStore</code>
        is replaced by
        <code translate="no" dir="ltr">ManagedRetainedValuesStore</code>
        .
      </p>
    </li>
    <li>
      <p>
        <code translate="no" dir="ltr">RetainedValuesStore</code>
        is now an interface.
      </p>
    </li>
  </ul>
  <p>
    Previously, installing a custom
    <code translate="no" dir="ltr">RetainedValuesStore</code>
    may have looked like this:
  </p>
  <devsite-code>
    <pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded="" syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">retainedValuesStore</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">retainControlledRetainedValuesStore</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">active</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">CompositionLocalProvider</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">LocalRetainedValuesStore</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">provides</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>

  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">composer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">currentComposer</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">DisposableEffect</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">          </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">cancellationHandle</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
  <span class="devsite-syntax-w">              </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">retainExitedValuesRequestsFromSelf</span><span class="devsite-syntax-w"> &gt; </span><span class="devsite-syntax-m">0</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">                  </span><span class="devsite-syntax-n">composer</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">scheduleFrameEndCallback</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">                      </span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">stopRetainingExitedValues</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">                  </span><span class="devsite-syntax-p">}</span>
  <span class="devsite-syntax-w">              </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">else</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">                  </span><span class="devsite-syntax-kc">null</span>
  <span class="devsite-syntax-w">              </span><span class="devsite-syntax-p">}</span>

  <span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">onDispose</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">              </span><span class="devsite-syntax-n">cancellationHandle</span><span class="devsite-syntax-o">?.</span><span class="devsite-syntax-na">cancel</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">              </span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">startRetainingExitedValues</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">          </span><span class="devsite-syntax-p">}</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>
  <span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
  </code></pre>
  </devsite-code>
  <p>With these API changes, this installation can be expressed with this code instead:</p>
  <devsite-code>
    <pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded="" syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">retainedValuesStore</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">retainManagedRetainedValuesStore</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">active</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">LocalRetainedValuesStoreProvider</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">retainedValuesStore</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
  <span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-p">()</span>
  <span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>
  <span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
  </code></pre>
  </devsite-code>
  <p><strong>Bug Fixes</strong></p>
  <ul>
    <li>
      Transfers invalidations of the scope in movable content before moving that content out of the slot table (
      <a href="https://android-review.googlesource.com/#/q/I9d1230d2fc2ff52f9e041b4d42bb6d3d86fd1d80">I9d123</a>
      ,
      <a href="https://issuetracker.google.com/issues/451651649">b/451651649</a>
      )
    </li>
  </ul>
